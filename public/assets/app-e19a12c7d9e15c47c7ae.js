webpackJsonp([1],{0:function(t,e,n){"use strict";n(239),n(256)},39:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="COMMENTS_LOAD_REQUESTED";e.COMMENTS_LOAD_REQUESTED=n;var r="COMMENTS_LOAD_SUCCEED";e.COMMENTS_LOAD_SUCCEED=r;var o="COMMENTS_LOAD_FAILED";e.COMMENTS_LOAD_FAILED=o;var i="COMMENT_ADD_REQUESTED";e.COMMENT_ADD_REQUESTED=i;var a="COMMENT_ADD_SUCCEED";e.COMMENT_ADD_SUCCEED=a;var u="COMMENT_ADD_FAILED";e.COMMENT_ADD_FAILED=u;var s="COMMENT_DESTROY_REQUESTED";e.COMMENT_DESTROY_REQUESTED=s;var c="COMMENT_DESTROY_SUCCEED";e.COMMENT_DESTROY_SUCCEED=c;var l="COMMENT_DESTROY_FAILED";e.COMMENT_DESTROY_FAILED=l;var f="COMMENT_DESTROY_DO";e.COMMENT_DESTROY_DO=f},53:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){return{type:f.AUTH_LOGGED_IN,user:t}}function a(t){var e=t.data,n=t.authAgent,r=t.router;return function(t){return t({type:f.AUTH_LOGIN_REQUESTED}),c["default"]({method:"POST",path:"/login",data:e}).then(function(e){var o=e.data.user,i=o.email,a=o.authentication_token;n.login(i,a,{sessionOnly:!1,cb:function(){t({type:f.AUTH_LOGIN_SUCCEED,data:e.data}),r.goBack()||r.transitionTo("/")}})})["catch"](function(e){t({type:f.AUTH_LOGIN_FAILED,code:e.status,error:e.data})})}}function u(t){var e=t.authAgent,n=t.router,r=t.backPath;return function(t){e.logout(function(){t({type:f.AUTH_LOGGED_OUT}),n.transitionTo("/logout",null,{backPath:r})})}}Object.defineProperty(e,"__esModule",{value:!0}),e.setLoggedInState=i,e.login=a,e.logout=u;var s=n(121),c=o(s),l=n(73),f=r(l)},54:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},s=n(4),c=r(s),l=function(t){function e(t){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return i(e,t),a(e,[{key:"render",value:function(){var t=this.props.size||30,e=this.props.width||2,n=this.props.color||"#29d",r=t+"px",o=e+"px",i={width:r,height:r},a={width:t/2+"px",height:r},u={width:r,height:r,border:o+" solid "+n,borderRadius:"50%",borderLeftColor:"transparent",borderBottomColor:"transparent"};return c["default"].createElement("div",{className:"loader-wrapper"},c["default"].createElement("div",{className:"loader-spinner-wrapper",style:i},c["default"].createElement("div",{className:"loader-spinner-icon",style:i},c["default"].createElement("div",{className:"loader-spinner-cut",style:a},c["default"].createElement("div",{className:"loader-spinner-donut",style:u})))))}}]),e}(c["default"].Component);e["default"]=l,t.exports=e["default"]},73:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="AUTH_LOGIN_REQUESTED";e.AUTH_LOGIN_REQUESTED=n;var r="AUTH_LOGIN_SUCCEED";e.AUTH_LOGIN_SUCCEED=r;var o="AUTH_LOGIN_FAILED";e.AUTH_LOGIN_FAILED=o;var i="AUTH_LOGGED_IN";e.AUTH_LOGGED_IN=i;var a="AUTH_LOGGED_OUT";e.AUTH_LOGGED_OUT=a},74:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(250),i=r(o);e["default"]=function(t,e,n){var r="string"==typeof t?document.getElementById(t):t,o=[],a={transitionEndEvents:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationEndEvents:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},u=document.createElement("div"),s=u.style;"AnimationEvent"in window||delete a.animationEndEvents.animation,"TransitionEvent"in window||delete a.transitionEndEvents.transition;for(var c in a)if(a.hasOwnProperty(c)){var l=a[c];for(var f in l)if(l.hasOwnProperty(f)&&f in s){o.push(l[f]);break}}var p={addEndEventListener:function(t,e){return 0===o.length?void window.setTimeout(e,0):void o.forEach(function(n){t.addEventListener(n,e,!1)})},removeEndEventListener:function(t,e){0!==o.length&&o.forEach(function(n){t.removeEventListener(n,e,!1)})}},d=[e,"animated"],h=function v(t){t&&t.target!==r||(p.removeEndEventListener(r,v),i["default"].remove(r,d),n&&n())};i["default"].remove(r,d),i["default"].add(r,d),p.addEndEventListener(r,h)},t.exports=e["default"]},75:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};r.env="production",r.devPort=3001,r.apiName="isomorphic-comments",r.apiVersion="v1",r.apiPath="/api",r.loginCookie="api_login",r.tokenCookie="api_token",r.loginHeader="X-User-Email",r.tokenHeader="X-User-Token",e["default"]=r,t.exports=e["default"]},119:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=t.apiHost;return function(t){return t({type:p.COMMENTS_LOAD_REQUESTED}),l["default"]({method:"GET",path:"/comments",host:e}).then(function(e){t({type:p.COMMENTS_LOAD_SUCCEED,comments:e.data.comments})})["catch"](function(e){t({type:p.COMMENTS_LOAD_FAILED,errors:{code:e.status,data:e.data}})})}}function a(t){var e=t.data;return function(t){return t({type:p.COMMENT_ADD_REQUESTED}),l["default"]({method:"POST",path:"/comments",data:e}).then(function(e){t({type:p.COMMENT_ADD_SUCCEED,comment:e.data.comment})})["catch"](function(e){t({type:p.COMMENT_ADD_FAILED,errors:{code:e.status,data:e.data}})})}}function u(t){var e=t.comment,n=t.auth;return function(t){return t({type:p.COMMENT_DESTROY_REQUESTED,comment:e}),l["default"]({method:"DELETE",path:"/comments/"+e,auth:n}).then(function(n){t({type:p.COMMENT_DESTROY_SUCCEED,comment:e})})["catch"](function(e){t({type:p.COMMENT_DESTROY_FAILED,errors:{code:e.status,data:e.data}})})}}function s(t){return{type:p.COMMENT_DESTROY_DO,comment:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.loadComments=i,e.addComment=a,e.destroyComment=u,e.destroyCommentFromStore=s;var c=n(121),l=o(c),f=n(39),p=r(f)},120:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},s=n(4),c=r(s),l=n(19),f=function(t){function e(t,n){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n)}return i(e,t),a(e,[{key:"render",value:function(){var t=this.props.comment;return c["default"].createElement("div",null,c["default"].createElement("div",{className:"comments__comment__author"},c["default"].createElement(l.Link,{to:"/comments/"+t.id},c["default"].createElement("strong",null,t.author)," said:")),c["default"].createElement("div",{className:"comments__comment__text"},t.comment))}}]),e}(c["default"].Component);e["default"]=f,t.exports=e["default"]},121:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(102),i=r(o),a=n(75),u=r(a);e["default"]=function(t){var e=t.method,n=""+(t.host||u["default"].apiPath)+t.path,r="json",o={"Content-Type":"application/json",Accept:"application/vnd."+u["default"].apiName+"."+u["default"].apiVersion+"+json"};t.auth&&Object.assign(o,t.auth);var a={method:e,url:n,responseType:r,headers:o};return t.data&&(a.data=t.data),i["default"](a)},t.exports=e["default"]},224:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},c=n(4),l=o(c),f=(n(19),n(227)),p=o(f),d=n(226),h=o(d),v=n(54),m=o(v),y=n(39),g=(r(y),function(t){function e(t,n){i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n)}return a(e,t),u(e,[{key:"render",value:function(){var t=this.props.params.id?h["default"]:p["default"],e=this.props.comments.isLoading;return l["default"].createElement("section",{id:"comments"},e?l["default"].createElement(m["default"],null):l["default"].createElement(t,this.props))}}]),e}(l["default"].Component));e["default"]=g,t.exports=e["default"]},225:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},l=n(4),f=o(l),p=n(30),d=n(32),h=n(224),v=o(h),m=n(238),y=o(m),g=n(53),_=r(g),b=n(119),E=r(b),w=function(t){function e(t,e){i(this,n),c(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,t,e)}a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.auth,n=t.comments,r=t.dispatch;return f["default"].createElement(v["default"],u({auth:e,authActions:p.bindActionCreators(_,r),comments:n,commentsActions:p.bindActionCreators(E,r)},this.props))}}]);var n=e;return e=d.connect(function(t){return{auth:t.auth,comments:t.comments}})(e)||e,e=y["default"](function(t){var e=t.apiHost,n=(t.auth,t.dispatch);t.params;return n(E.loadComments({apiHost:e}))})(e)||e}(f["default"].Component);e["default"]=w,t.exports=e["default"]},226:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},s=n(4),c=r(s),l=n(19),f=n(120),p=r(f),d=function(t){function e(t,n){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n)}return i(e,t),a(e,[{key:"componentDidMount",value:function(){this.props.loader.done(),this.props.setTitle()}},{key:"componentWillReceiveProps",value:function(t){t.loader.done()}},{key:"render",value:function(){var t=this,e=(this.props.commentsActions,this.props.comments.comments),n=e.find(function(e){return e.id===parseInt(t.props.params.id,10)});return c["default"].createElement("div",null,c["default"].createElement("div",{id:"comments__comment",className:"comments__comment"},c["default"].createElement(p["default"],{comment:n})),c["default"].createElement(l.Link,{to:"/",id:"comments__comment__link-back",className:"button"},"← Back to comments"))}}]),e}(c["default"].Component);e["default"]=d,t.exports=e["default"]},227:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},c=n(4),l=o(c),f=(n(19),n(74)),p=o(f),d=n(54),h=o(d),v=n(228),m=o(v),y=n(120),g=o(y),_=n(39),b=r(_),E=function(t){function e(t,n){i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n)}return a(e,t),u(e,[{key:"componentDidMount",value:function(){this.props.loader.done(),this.props.setTitle()}},{key:"componentWillReceiveProps",value:function(t){var e=(this.props.comments.comments,t.comments),n=e.type,r=e.destroyed;e.comments;n===b.COMMENT_DESTROY_SUCCEED&&r?p["default"]("comments__list__comment-"+r,"flipOutX",function(){t.commentsActions.destroyCommentFromStore(r)}):t.loader.done()}},{key:"componentDidUpdate",value:function(){var t=this.props.comments,e=t.type,n=t.comments;if(e===b.COMMENT_ADD_SUCCEED){var r=n[0];p["default"]("comments__list__comment-"+r.id,"flipInX")}}},{key:"_handleDestroy",value:function(t){var e=this.props,n=e.commentsActions,r=e.authAgent;n.destroyComment({comment:t,auth:r.getAuthHeaders()})}},{key:"render",value:function(){var t=this,e=this.props.comments,n=e.comments,r=e.isDestroying,o=e.destroyed,i=this.props.auth.isLoggedIn,a=n.map(function(e){return l["default"].createElement("li",{key:e.id,id:"comments__list__comment-"+e.id,className:"comments__comment"},l["default"].createElement(g["default"],{comment:e}),i&&l["default"].createElement("div",{className:"destroy",onClick:t._handleDestroy.bind(t,e.id)}),r&&o===e.id&&l["default"].createElement("div",{className:"loader-wrapper"},l["default"].createElement(h["default"],null)))});return l["default"].createElement("div",null,l["default"].createElement(m["default"],this.props),l["default"].createElement("ul",{id:"comments__list"},a))}}]),e}(l["default"].Component);e["default"]=E,t.exports=e["default"]},228:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},l=n(4),f=o(l),p=n(74),d=o(p),h=n(54),v=o(h),m=n(39),y=r(m),g=function(t){function e(t,n){a(this,e),c(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n),this.state={author:null,authorState:null,comment:null,commentState:null}}return u(e,t),s(e,[{key:"componentWillReceiveProps",value:function(t){t.comments.type===y.COMMENT_ADD_SUCCEED&&this.setState({comment:null,commentState:null})}},{key:"_handleValueChange",value:function(t){var e=t.target,n=e.name,r=e.value;this.setState(i({},n,r.trim()),this._validateForm.bind(this,null,n))}},{key:"_validateForm",value:function(t,e){var n=this,r={author:{required:!0},comment:{required:!0}},o="error",i="ok",a=t?"FORM"===t.target.nodeName:!1;this._formIsValid=!0,this._focusedOnError=!1,this._wasSubmitted=!1,a&&!this._wasSubmitted&&(this._wasSubmitted=!0);var u=[];if(a){t.preventDefault();for(var s in r)r.hasOwnProperty(s)&&u.push({key:s,rules:r[s]})}else u.push({key:e,rules:r[e]});u.forEach(function(t,e){var r=n.state[t.key]?n.state[t.key].trim():n.state[t.key],s=t.rules;return s.required&&!r?void n._setFormState(t.key,o):(n._setFormState(t.key,i),void(a&&n._formIsValid&&e===u.length-1&&n._handleSuccessSubmit()))}),a&&!this._formIsValid&&this._handleFailedSubmit()}},{key:"_setFormState",value:function(t,e){var n="error"===e;this.setState(i({},t+"Status",e)),n&&(this._formIsValid=!1,this._focusedOnError||(f["default"].findDOMNode(this.refs[t]).focus(),this._focusedOnError=!0))}},{key:"_handleSuccessSubmit",value:function(){var t=this.state,e=t.author,n=t.comment,r=this.props.commentsActions,o={comment:{author:e,comment:n}};r.addComment({data:o})}},{key:"_handleFailedSubmit",value:function(){d["default"]("comments__form","shake")}},{key:"render",value:function(){var t=this.props.comments.isPosting;return f["default"].createElement("form",{id:"comments__form",onSubmit:this._validateForm.bind(this)},f["default"].createElement("input",{ref:"author",name:"author",type:"text",placeholder:"Who are you",value:this.state.author,className:this.state.authorStatus,onChange:this._handleValueChange.bind(this),autoFocus:!0}),f["default"].createElement("input",{ref:"comment",name:"comment",type:"text",placeholder:"Say smth",value:this.state.comment,className:this.state.commentStatus,onChange:this._handleValueChange.bind(this)}),f["default"].createElement("div",{className:"button-wrapper"},f["default"].createElement("button",{disabled:t},"Say!"),t&&f["default"].createElement(v["default"],{color:"#fff"})))}}]),e}(f["default"].Component);e["default"]=g,t.exports=e["default"]},229:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},s=n(4),c=r(s),l=function(t){function e(t,n){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n)}return i(e,t),a(e,[{key:"render",value:function(){return c["default"].createElement("footer",null,c["default"].createElement("div",{id:"footer__inner"},c["default"].createElement("div",{id:"footer__text"},c["default"].createElement("a",{href:"https://facebook.github.io/react",target:"_blank"},"React"),"·",c["default"].createElement("a",{href:"https://github.com/gaearon/redux",target:"_blank"},"Redux"),"·",c["default"].createElement("a",{href:"http://rackt.github.io/react-router",target:"_blank"},"React Router"),"·",c["default"].createElement("a",{href:"http://expressjs.com",target:"_blank"},"Express"),"·",c["default"].createElement("a",{href:"https://nodejs.org",target:"_blank"},"Node.js"),"·",c["default"].createElement("a",{href:"http://rubyonrails.org",target:"_blank"},"Ruby on Rails"))))}}]),e}(c["default"].Component);e["default"]=l,t.exports=e["default"]},230:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},s=n(4),c=r(s),l=n(19),f=function(t){function e(t,n){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n)}return i(e,t),a(e,[{key:"_loadComments",value:function(){var t=this.props,e=t.commentsActions,n=t.location;"/login"!==n.pathname&&e.loadComments({})}},{key:"render",value:function(){return c["default"].createElement("header",null,c["default"].createElement("h1",null,c["default"].createElement(l.Link,{to:"/",onClick:this._loadComments.bind(this)},"Isomorphic Comments")))}}]),e}(c["default"].Component);e["default"]=f,t.exports=e["default"]},231:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},l=n(4),f=o(l),p=n(30),d=n(230),h=o(d),v=n(119),m=r(v),y=function(t){function e(t,n){i(this,e),c(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n)}return a(e,t),s(e,null,[{key:"contextTypes",value:{store:l.PropTypes.object},enumerable:!0}]),s(e,[{key:"render",value:function(){var t=this.context.store.dispatch;return f["default"].createElement(h["default"],u({commentsActions:p.bindActionCreators(m,t)},this.props))}}]),e}(f["default"].Component);e["default"]=y,t.exports=e["default"]},232:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},l=n(4),f=o(l),p=n(74),d=o(p),h=n(54),v=o(h),m=n(73),y=r(m),g=function(t){function e(t,n){a(this,e),c(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n),this.state={login:null,loginState:null,password:null,passwordState:null}}return u(e,t),s(e,null,[{key:"contextTypes",value:{router:l.PropTypes.object},enumerable:!0}]),s(e,[{key:"componentDidMount",value:function(){this.props.loader.done(),this.props.setTitle()}},{key:"componentWillReceiveProps",value:function(t){var e=t.auth.type;e===y.AUTH_LOGIN_FAILED?this._handleFailedSubmit():this.props.loader.done()}},{key:"_handleValueChange",value:function(t){var e=t.target,n=e.name,r=e.value;this.setState(i({},n,r.trim()),this._validateForm.bind(this,null,n))}},{key:"_validateForm",value:function(t,e){var n=this,r={login:{required:!0},password:{required:!0}},o="error",i="ok",a=t?"FORM"===t.target.nodeName:!1;this._formIsValid=!0,this._focusedOnError=!1,this._wasSubmitted=!1,a&&!this._wasSubmitted&&(this._wasSubmitted=!0);var u=[];if(a){t.preventDefault();for(var s in r)r.hasOwnProperty(s)&&u.push({key:s,rules:r[s]})}else u.push({key:e,rules:r[e]});u.forEach(function(t,e){var r=n.state[t.key]?n.state[t.key].trim():n.state[t.key],s=t.rules;return s.required&&!r?void n._setFormState(t.key,o):(n._setFormState(t.key,i),void(a&&n._formIsValid&&e===u.length-1&&n._handleSuccessSubmit()))}),a&&!this._formIsValid&&this._handleFailedSubmit()}},{key:"_setFormState",value:function(t,e){var n="error"===e;this.setState(i({},t+"Status",e)),n&&(this._formIsValid=!1,this._focusedOnError||(f["default"].findDOMNode(this.refs[t]).focus(),this._focusedOnError=!0))}},{key:"_handleSuccessSubmit",value:function(){var t=this.state,e=t.login,n=t.password,r=this.props,o=r.authAgent,i=r.authActions,a=this.context.router,u={api_user:{email:e,password:n}};i.login({data:u,authAgent:o,router:a})}},{key:"_handleFailedSubmit",value:function(){d["default"]("login__form","shake")}},{key:"render",value:function(){var t=this.props.auth.isLoading;return f["default"].createElement("section",{id:"login"},f["default"].createElement("form",{id:"login__form",onSubmit:this._validateForm.bind(this)},f["default"].createElement("input",{type:"text",ref:"login",name:"login",placeholder:"Email",value:this.state.login,className:this.state.loginStatus,onChange:this._handleValueChange.bind(this),autoFocus:!0}),f["default"].createElement("input",{type:"password",ref:"password",name:"password",placeholder:"Password",value:this.state.password,className:this.state.passwordStatus,onChange:this._handleValueChange.bind(this)}),f["default"].createElement("div",{className:"button-wrapper"},f["default"].createElement("button",{disabled:t},"Login!"),t&&f["default"].createElement(v["default"],{color:"#fff"}))),f["default"].createElement("div",null,f["default"].createElement("p",null,"Loggedin users can destroy comments! (not really)"),f["default"].createElement("p",null,"Email: ",f["default"].createElement("strong",null,"demo@demo.me"),f["default"].createElement("br",null),"Password: ",f["default"].createElement("strong",null,"demopass"))))}}]),e}(f["default"].Component);e["default"]=g,t.exports=e["default"]},233:function(t,e,n){
"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},l=n(4),f=o(l),p=n(30),d=n(32),h=n(232),v=o(h),m=n(53),y=r(m),g=function(t){function e(t,e){i(this,n),c(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,t,e)}a(e,t),s(e,null,[{key:"checkAuth",value:function(t,e){var n=this.context.store.getState(),r=n.auth;r.isLoggedIn&&e.to("/")}}]),s(e,[{key:"render",value:function(){var t=this.props,e=t.auth,n=t.dispatch;return f["default"].createElement(v["default"],u({auth:e,authActions:p.bindActionCreators(y,n)},this.props))}}]);var n=e;return e=d.connect(function(t){return{auth:t.auth}})(e)||e}(f["default"].Component);e["default"]=g,t.exports=e["default"]},234:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},s=n(4),c=r(s),l=function(t){function e(t,n){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n)}return i(e,t),a(e,null,[{key:"contextTypes",value:{router:s.PropTypes.object},enumerable:!0}]),a(e,[{key:"componentDidMount",value:function(){var t=this.context.router,e=this.props.location.state.backPath;t.transitionTo(e||"/")}},{key:"render",value:function(){return null}}]),e}(c["default"].Component);e["default"]=l,t.exports=e["default"]},235:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},s=n(4),c=r(s),l=n(248),f=r(l),p=function(t){function e(t,n){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n)}return i(e,t),a(e,[{key:"render",value:function(){throw new f["default"](404)}}]),e}(c["default"].Component);e["default"]=p,t.exports=e["default"]},236:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},s=n(4),c=r(s),l=n(19),f=function(t){function e(t,n){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n)}return i(e,t),a(e,null,[{key:"contextTypes",value:{router:s.PropTypes.object},enumerable:!0}]),a(e,[{key:"_handleLogout",value:function(){var t=this.props,e=t.authActions,n=t.authAgent,r=this.context.router,o=r.state.location,i=o.pathname,a=o.query,u=r.makePath(i,a);e.logout({authAgent:n,router:r,backPath:u})}},{key:"render",value:function(){var t=this.props.auth.isLoggedIn,e=c["default"].createElement("span",{id:"topbar__auth-link__login__wrapper"},c["default"].createElement(l.Link,{to:"/login",id:"topbar__auth-link__login"},"Login")),n=c["default"].createElement("span",{id:"topbar__auth-link__logout__wrapper"},c["default"].createElement("span",{id:"topbar__auth-link__logout",onClick:this._handleLogout.bind(this)},"Logout"));return c["default"].createElement("section",{id:"topbar"},c["default"].createElement("div",{id:"topbar__links-wrapper"},c["default"].createElement("div",{id:"topbar__githab-link",className:"float-left"},c["default"].createElement("a",{href:"https://github.com/alexfedoseev/isomorphic-comments-app",target:"_blank"},"Sources on Github")),c["default"].createElement("div",{id:"topbar__auth-link",className:"float-right"},t?n:e)))}}]),e}(c["default"].Component);e["default"]=f,t.exports=e["default"]},237:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},l=n(4),f=o(l),p=n(30),d=n(32),h=n(236),v=o(h),m=n(53),y=r(m),g=function(t){function e(t,e){i(this,n),c(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,t,e)}a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.auth,n=t.dispatch;return f["default"].createElement(v["default"],u({auth:e,authActions:p.bindActionCreators(y,n)},this.props))}}]);var n=e;return e=d.connect(function(t){return{auth:t.auth}})(e)||e}(f["default"].Component);e["default"]=g,t.exports=e["default"]},238:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},s=n(4),c=r(s);e["default"]=function(t){return function(e){return function(n){function r(){o(this,r),u(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,arguments)}return i(r,n),a(r,[{key:"componentDidMount",value:function(){if(!this.props.initialRender){var e=this.props,n=e.authAgent,r=e.location,o=e.params,i=e.store;t({location:r,params:o,auth:n.getAuthHeaders(),dispatch:i.dispatch})}}},{key:"render",value:function(){return c["default"].createElement(e,this.props)}}],[{key:"fetchData",value:t,enumerable:!0}]),r}(c["default"].Component)}},t.exports=e["default"]},239:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(122),i=(r(o),n(252)),a=r(i),u=n(255),s=r(u),c=n(246),l=r(c),f=n(245),p=r(f),d=n(242),h=r(d),v=n(253),m=r(v),y=m["default"](document.location.hostname),g=s["default"].googleAnalyticsId,_={routes:l["default"],reducers:p["default"],Meta:h["default"],cookieDomain:y,googleAnalyticsId:g};e["default"]=a["default"](_),t.exports=e["default"]},240:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},l=n(4),f=o(l),p=n(30),d=n(32),h=n(241),v=o(h),m=n(53),y=r(m),g=function(t){function e(t,e){i(this,n),c(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,t,e)}a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.auth,n=t.dispatch;return f["default"].createElement(v["default"],u({auth:e,authActions:p.bindActionCreators(y,n)},this.props))}}]);var n=e;return e=d.connect(function(t){return{auth:t.auth}})(e)||e}(f["default"].Component);e["default"]=g,t.exports=e["default"]},241:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;u=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,n=a,r=!0}},s=n(4),c=r(s),l=n(237),f=r(l),p=n(231),d=r(p),h=n(229),v=r(h),m=function(t){function e(t,n){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n)}return i(e,t),a(e,[{key:"render",value:function(){return c["default"].createElement("section",{id:"layout"},c["default"].createElement(f["default"],{authAgent:this.props.authAgent}),c["default"].createElement(d["default"],{location:this.props.location}),this.props.children,c["default"].createElement(v["default"],null))}}]),e}(c["default"].Component);e["default"]=m,t.exports=e["default"]},242:function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){n(this,t);var r={pageTitle:"Isomorphic Comments",pageDescription:"Comments made isomorphic!",pageKeywords:"flux react redux rails",pageType:"website",pageImage:"/images/cover.png",siteName:"Isomorphic Comments",facebookAppId:e.facebookAppId||null},o=e.state,i=e.route,a=e.params,u=e.appHost,s=e.fullPath,c=e.cssAsset;switch(this.cssAsset=c,this.appHost=u,this.pageUrl=u+s,this.pageImage=u+r.pageImage,this.pageType=r.pageType,this.siteName=r.siteName,this.facebookAppId=r.facebookAppId,i){case"comment":var l=o.comments.comments,f=l.find(function(t){return t.id===parseInt(a.id,10)}).author;this.pageTitle=f+"'s comment",this.pageDescription=r.pageDescription,this.pageKeywords=r.pageKeywords;break;case"login":this.pageTitle="Login",this.pageDescription=r.pageDescription,this.pageKeywords=r.pageKeywords;break;case"not-found":this.pageTitle="Oops! Nothing here.",this.pageDescription="404",this.pageKeywords=r.pageKeywords;break;default:this.pageTitle=r.pageTitle,this.pageDescription=r.pageDescription,this.pageKeywords=r.pageKeywords}this.pageTitle!==r.pageTitle&&(this.pageTitle+=" | "+r.pageTitle)}return r(t,[{key:"getTitle",value:function(){return this.pageTitle}}]),t}();e["default"]=o,t.exports=e["default"]},243:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){void 0===t&&(t=u);var n=e.type,r=e.user,o=(e.code,e.error);switch(n){case a.AUTH_LOGGED_IN:return{type:n,user:r,isLoggedIn:!0,error:null,isLoading:!1};case a.AUTH_LOGIN_REQUESTED:return{type:n,user:null,isLoggedIn:!1,error:null,isLoading:!0};case a.AUTH_LOGIN_SUCCEED:return{type:n,user:r,isLoggedIn:!0,error:null,isLoading:!1};case a.AUTH_LOGIN_FAILED:return{type:n,error:o,user:null,isLoggedIn:!1,isLoading:!1};case a.AUTH_LOGGED_OUT:return{type:n,user:null,isLoggedIn:!1,error:null,isLoading:!1};default:return t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var i=n(73),a=r(i),u={type:null,user:null,isLoggedIn:!1,error:null,isLoading:!1};t.exports=e["default"]},244:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){void 0===t&&(t=s);var n=e.type,r=e.comments,o=e.comment,a=e.errors;switch(n){case u.COMMENTS_LOAD_REQUESTED:return i({},t,{type:n,comments:[],isLoading:!0});case u.COMMENTS_LOAD_SUCCEED:return i({},t,{type:n,comments:r,errors:null,isLoading:!1});case u.COMMENTS_LOAD_FAILED:return i({},t,{type:n,errors:a,comments:[],isLoading:!1});case u.COMMENT_ADD_REQUESTED:return i({},t,{type:n,isPosting:!0});case u.COMMENT_ADD_SUCCEED:var c=t.comments.slice();return c.unshift(o),i({},t,{type:n,comments:c,isPosting:!1});case u.COMMENT_ADD_FAILED:return i({},t,{type:n,errors:a,isPosting:!1});case u.COMMENT_DESTROY_REQUESTED:return i({},t,{type:n,destroyed:o,isDestroying:!0});case u.COMMENT_DESTROY_SUCCEED:return i({},t,{type:n,destroyed:o,isDestroying:!1});case u.COMMENT_DESTROY_DO:var l=t.comments.filter(function(t){return t.id!==o});return i({},t,{type:n,comments:l,destroyed:null,isDestroying:!1});case u.COMMENT_DESTROY_FAILED:return i({},t,{type:n,errors:a,destroyed:null,isDestroying:!1});default:return t}}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e["default"]=o;var a=n(39),u=r(a),s={type:null,comments:[],destroyed:null,errors:null,isLoading:!1,isPosting:!1,isDestroying:!1};t.exports=e["default"]},245:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(243),i=r(o),a=n(244),u=r(a);e["default"]={auth:i["default"],comments:u["default"]},t.exports=e["default"]},246:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),i=r(o),a=n(19),u=n(240),s=r(u),c=n(225),l=r(c),f=n(233),p=r(f),d=n(234),h=r(d),v=n(235),m=r(v);e["default"]=function(t){return i["default"].createElement(a.Route,{name:"app",component:s["default"]},i["default"].createElement(a.Route,{name:"comments",path:"/",component:l["default"]}),i["default"].createElement(a.Route,{name:"comment",path:"/comments/:id",component:l["default"]}),i["default"].createElement(a.Route,{name:"login",path:"/login",component:p["default"],context:t,onEnter:p["default"].DecoratedComponent.checkAuth}),i["default"].createElement(a.Route,{name:"logout",path:"/logout",component:h["default"]}),i["default"].createElement(a.Route,{name:"not-found",path:"*",component:m["default"]}))},t.exports=e["default"]},247:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(75),s=r(u),c=n(251),l=r(c),f=function(){function t(e,n){i(this,t),this.cookie=l["default"](e),this.setCookieParams=function(t){var e=function(t){var e=new Date;return new Date(e.setMonth(e.getMonth()+t))},r={};return r.httpOnly=!1,n&&(r.domain=n),t&&(r.expires=e(t)),r}}return a(t,[{key:"login",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=n.sessionOnly?this.setCookieParams():this.setCookieParams(6);this.cookie.set(s["default"].loginCookie,t,r),this.cookie.set(s["default"].tokenCookie,e,r),n.cb&&n.cb()}},{key:"logout",value:function(t){this.cookie.set(s["default"].loginCookie,"bye-bye",this.setCookieParams(-1)),this.cookie.set(s["default"].tokenCookie,"bye-bye",this.setCookieParams(-1)),t&&t()}},{key:"getLogin",value:function(){return this.cookie.get(s["default"].loginCookie)}},{key:"getToken",value:function(){return this.cookie.get(s["default"].tokenCookie)}},{key:"getAuthHeaders",value:function(){if(this.getLogin()&&this.getToken()){var t;return t={},o(t,s["default"].loginHeader,this.getLogin()),o(t,s["default"].tokenHeader,this.getToken()),t}return!1}},{key:"isLoggedIn",value:function(){var t=this.cookie;return!(!t.get(s["default"].loginCookie)||!t.get(s["default"].tokenCookie))}}]),t}();e["default"]=f,t.exports=e["default"]},248:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){this.status=t,this.message=e||null};n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,e["default"]=n,t.exports=e["default"]},249:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={init:function(t){this._injectAnalytics(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",t,"auto"),ga("require","displayfeatures")},sendPageview:function(t){"undefined"!=typeof ga&&(ga("set","page",t),ga("send","pageview"))},sendEvent:function(t){"undefined"!=typeof ga&&t&&t.category&&t.action&&ga("send","event",t.category,t.action)},_injectAnalytics:function(t,e,n,r,o,i,a){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,i=e.createElement(n),a=e.getElementsByTagName(n)[0],i.async=1,i.src=r,a.parentNode.insertBefore(i,a)}},t.exports=e["default"]},250:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={add:function(t,e){var n=this;return t.classList?this._iterateClassNames(e,function(e){n._hasClass(t,e)||t.classList.add(e)}):this._iterateClassNames(e,function(e){n._hasClass(t,e)||(t.className=t.className+" "+e)}),t},remove:function(t,e){var n=this;return t.classList?this._iterateClassNames(e,function(e){n._hasClass(t,e)&&t.classList.remove(e)}):this._iterateClassNames(e,function(e){n._hasClass(t,e)&&(t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim())}),t},_hasClass:function(t,e){return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1},_iterateClassNames:function(t,e){Array.isArray(t)?t.forEach(function(t){return e(t)}):e(t)}},t.exports=e["default"]},251:function(t,e,n){(function(r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(123),a=o(i);e["default"]=function(t){return r.browser?{get:function(e){return a["default"].parse(t.cookie)[e]},set:function(e,n,r){t.cookie=a["default"].serialize(e,n,r)}}:{get:function(e){return t.cookies[e]},set:function(e,n,r){t.res.cookie(e,n,r)}}},t.exports=e["default"]}).call(e,n(40))},252:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(4),a=r(i),u=n(19),s=r(u),c=n(267),l=r(c),f=n(30),p=n(32),d=n(153),h=r(d),v=n(124),m=r(v),y=n(247),g=r(y),_=n(254),b=r(_),E=n(249),w=r(E);e["default"]=function(t){var e=f.combineReducers(t.reducers),n=f.applyMiddleware(h["default"])(f.createStore)(e,window.__DATA__),r=new l["default"],i=new g["default"](document,t.cookieDomain),u=t.routes({store:n});document.location.protocol+"//"+document.location.host;t.googleAnalyticsId&&w["default"].init(t.googleAnalyticsId);var c=!0,d=function(e,r){return m["default"].configure({showSpinner:!1,trickle:!0}),"app"===r.route.name&&(m["default"].start(),w["default"].sendPageview(r.location.pathname)),a["default"].createElement(e,o({store:n,loader:m["default"],authAgent:i,initialRender:c,setTitle:b["default"],Meta:t.Meta},r))},v=a["default"].createElement(p.Provider,{store:n},function(){return a["default"].createElement(s["default"],{history:r,children:u,createElement:d})}),y=document.getElementById("app");a["default"].render(v,y,function(){return c=!1})},t.exports=e["default"]},253:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){var n=e?e+1:2;return"."+t.split(".").slice(-n).join(".")},t.exports=e["default"]},254:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){var t=this.Meta,e=this.route,n=this.store,r=this.location,o=this.params,i=new t({location:r,params:o,route:e.name,state:n.getState()});document.title=i.getTitle()},t.exports=e["default"]},255:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(75),i=r(o);i["default"].bundle="app",i["default"].appPort={NODE_ENV:"production"}.APP_PORT||3500,i["default"].googleAnalyticsId="UA-XXXXXXXX-Y",i["default"].facebookAppId="123456789012345",e["default"]=i["default"],t.exports=e["default"]},256:function(t,e){},267:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function a(t){var e=window.history.state;e&&window.history.replaceState(u(e,t),"")}e.__esModule=!0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(268),c=r(s),l=n(77),f=n(79),p=r(f),d=function(t){function e(n){o(this,e),t.call(this,n),this.handlePopState=this.handlePopState.bind(this),this.isSupported=l.supportsHistory()}return i(e,t),e.prototype._updateLocation=function(t){var e=null;if(this.isSupported){var n=window.history.state;e=this._createState(n),n&&n.key||window.history.replaceState(e,"")}this.location=this.createLocation(l.getWindowPath(),e,t)},e.prototype.setup=function(){null==this.location&&this._updateLocation()},e.prototype.handlePopState=function(t){void 0!==t.state&&(this._updateLocation(p["default"].POP),this._notifyChange())},e.prototype.addChangeListener=function(e){t.prototype.addChangeListener.call(this,e),1===this.changeListeners.length&&(window.addEventListener?window.addEventListener("popstate",this.handlePopState,!1):window.attachEvent("onpopstate",this.handlePopState))},e.prototype.removeChangeListener=function(e){t.prototype.removeChangeListener.call(this,e),0===this.changeListeners.length&&(window.removeEventListener?window.removeEventListener("popstate",this.handlePopState,!1):window.detachEvent("onpopstate",this.handlePopState))},e.prototype.pushState=function(t,e){this.isSupported?(a(this.getScrollPosition()),t=this._createState(t),window.history.pushState(t,"",e),this.location=this.createLocation(e,t,p["default"].PUSH),this._notifyChange()):window.location=e},e.prototype.replaceState=function(t,e){this.isSupported?(t=this._createState(t),window.history.replaceState(t,"",e),this.location=this.createLocation(e,t,p["default"].REPLACE),this._notifyChange()):window.location.replace(e)},e}(c["default"]),h=new d;e.history=h,e["default"]=d},268:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}e.__esModule=!0;var a=n(128),u=r(a),s=n(77),c=function(t){function e(){var n=void 0===arguments[0]?{}:arguments[0];o(this,e),t.call(this,n),this.getScrollPosition=n.getScrollPosition||s.getWindowScrollPosition}return i(e,t),e.prototype.go=function(t){0!==t&&window.history.go(t)},e}(u["default"]);e["default"]=c,t.exports=e["default"]}});